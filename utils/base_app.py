import streamlit as st

st.set_page_config(page_title="ê´‘ê³  ì œì‘", layout="centered")

st.title("ì •ë³´ ì…ë ¥")
st.markdown("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•œ í›„ [ì œì¶œ] ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.")

# 0. ë¸Œëœë“œ ëª…
store_name = st.text_input("**0. ìƒí˜¸ëª… (ê°€ê²Œ ì´ë¦„)**")

# 1. ì—…ì¢… ëŒ€ë¶„ë¥˜ ------------------------------
category_main = st.selectbox("**1. ì—…ì¢… ëŒ€ë¶„ë¥˜**", 
    ["ìš”ì‹ì—…", "ì„œë¹„ìŠ¤ì—…", "ì†Œë§¤ì—…", "ìƒí™œ/ì—¬ê°€", "ê±´ê°•/ì›°ë¹™", "ê¸°íƒ€"])

# 2. ì—…ì¢… ì†Œë¶„ë¥˜ ------------------------------
category_sub_list = {
    "ìš”ì‹ì—…": ["í•œì‹ë‹¹", "ì¤‘ì‹ë‹¹", "ì¼ì‹ë‹¹", "ì–‘ì‹ë‹¹", "ì¹˜í‚¨ì§‘", "ë¶„ì‹ì§‘", "íŒ¨ìŠ¤íŠ¸í‘¸ë“œì ", "ì¹´í˜/ë””ì €íŠ¸", "ìˆ ì§‘/í˜¸í”„/í¬ì°¨", "ë°°ë‹¬ ì „ë¬¸ì ", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"],
    "ì„œë¹„ìŠ¤ì—…": ["ë¯¸ìš©ì‹¤/í—¤ì–´ìƒµ", "ë„¤ì¼ìƒµ", "í”¼ë¶€ê´€ë¦¬/ì—ìŠ¤í…Œí‹±", "ì„¸íƒì†Œ", "í•™ì›/êµìœ¡ ì„œë¹„ìŠ¤", "ìš´ë™/í—¬ìŠ¤/PT ìŠ¤íŠœë””ì˜¤", "ì‚¬ì§„ê´€/ìŠ¤íŠœë””ì˜¤", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"],
    "ì†Œë§¤ì—…": ["í¸ì˜ì ", "ë§ˆíŠ¸/ìŠˆí¼", "ì „í†µì‹œì¥ ìƒì ", "ì˜ë¥˜ ë§¤ì¥", "ì‹ ë°œ ë§¤ì¥", "ì•¡ì„¸ì„œë¦¬/ì¡í™”ì ", "í™”ì¥í’ˆ ë§¤ì¥", "ì „ìì œí’ˆ ë§¤ì¥", "ì„œì ", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"],
    "ìƒí™œ/ì—¬ê°€": ["ê½ƒì§‘/í”Œë¼ì›Œìƒµ", "ì• ê²¬ìƒµ", "ë…¸ë˜ë°©", "PCë°©", "ë‹¹êµ¬ì¥", "ë³´ë“œê²Œì„/ë°©íƒˆì¶œ ì¹´í˜", "ìŠ¤íŠœë””ì˜¤ ëŒ€ì—¬", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"],
    "ê±´ê°•/ì›°ë¹™": ["ì•½êµ­", "í•œì˜ì›", "í—¬ìŠ¤í´ëŸ½", "ìš”ê°€/í•„ë¼í…ŒìŠ¤", "ë§ˆì‚¬ì§€ìƒµ/ìŠ¤íŒŒ", "ê±´ê°•ì‹í’ˆ ë§¤ì¥", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"],
    "ê¸°íƒ€": ["í”„ë¦¬ëœì„œ/ê°œì¸ ì‚¬ì—…", "ì˜¨ë¼ì¸ íŒë§¤(ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ë“±)", "í‘¸ë“œíŠ¸ëŸ­", "ì§€ì—­ íŠ¹ì‚°ë¬¼ íŒë§¤ì ", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
}

category_sub = st.selectbox("**2. ì„¸ë¶€ ì—…ì¢…**", category_sub_list[category_main])

category_sub_custom = ""
if category_sub == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    category_sub_custom = st.text_input("ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”:")

category_sub = category_sub_custom if category_sub == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else category_sub

# 3. ì£¼ìš” ë©”ë‰´ ------------------------------ã„¹
st.markdown("**3. ì£¼ìš” ë©”ë‰´ ì…ë ¥**") 

num_menus = st.number_input("ë©”ë‰´ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”", min_value=1, max_value=20, value=2, step=1)
menus = []

for i in range(num_menus):
    name = st.text_input(f"ì„œë¹„ìŠ¤ {i+1} ì´ë¦„", key=f"name_{i}")
    price = st.text_input(f"ì„œë¹„ìŠ¤ {i+1} ê°€ê²© (ì›)", key=f"price_{i}_text")
    st.markdown(f"---") 
    try:
        price = int(price) if price else 0
    except ValueError:
        price = 0
    
    menus.append({"name": name, "price": price})

# 4. íƒ€ê²Ÿ ------------------------------
st.markdown("**4. íƒ€ê²Ÿ ê³ ê°ì¸µ**")

target_options = [
    "ê°€ì¡± ë‹¨ìœ„", "ì§ì¥ì¸", "í•™ìƒ", "ì—°ì¸/ë°ì´íŠ¸ ê³ ê°", "40ëŒ€ ì´ìƒ ì¤‘ì¥ë…„ì¸µ", "1ì¸ ê³ ê°",
    "ì–´ë¦°ì´ ë™ë°˜ ê³ ê°", "ì‹œë‹ˆì–´(60ëŒ€ ì´ìƒ)", "ê´€ê´‘ê°/ì—¬í–‰ê°", "ì§€ì—­ ì£¼ë¯¼", "ì¸ê·¼ ìƒê¶Œ ì¢…ì‚¬ì",
    "ìš´ë™/ê±´ê°• ê´€ì‹¬ ê³ ê°", "íŠ¸ë Œë“œ/ìœ í–‰ ê´€ì‹¬ ê³ ê°", "í”„ë¦¬ëœì„œ/ì¬íƒê·¼ë¬´ì", "ì™¸êµ­ì¸ ê³ ê°"
]

targets = []

col1, col2, col3 = st.columns(3)
third = (len(target_options) + 2) // 3

with col1:
    for opt in target_options[:third]:
        if st.checkbox(opt, key=f"col1_{opt}"):
            targets.append(opt)

with col2:
    for opt in target_options[third:2*third]:
        if st.checkbox(opt, key=f"col2_{opt}"):
            targets.append(opt)

with col3:
    for opt in target_options[2*third:]:
        if st.checkbox(opt, key=f"col3_{opt}"):
            targets.append(opt)

custom_targets_raw = st.text_input("ì§ì ‘ ì…ë ¥(ì‰¼í‘œë¡œ êµ¬ë¶„)", placeholder="ì˜ˆ: MZì„¸ëŒ€, ì˜¨ë¼ì¸ ê³ ê°, ì§€ì—­ ì¶•ì œ ë°©ë¬¸ê°")
if custom_targets_raw:
    custom_targets = [ct.strip() for ct in custom_targets_raw.split(",") if ct.strip()]
    targets.extend(custom_targets)


# 5. ì£¼ìš” íŒë§¤ í¬ì¸íŠ¸ ------------------------------
selling_points = st.multiselect("**5. ì£¼ìš” íŒë§¤ í¬ì¸íŠ¸ (USP, ì¥ì )**", 
    [
        "ì €ë ´í•œ ê°€ê²©", "ë¹ ë¥¸ ë°°ë‹¬", "ê±´ê°•í•œ ì¬ë£Œ", "í‘¸ì§í•œ ì–‘", "ë…íŠ¹í•œ ë§›/ë ˆì‹œí”¼", "ì§€ì—­ íŠ¹ì‚°ë¬¼ í™œìš©",
        "í”„ë¦¬ë¯¸ì—„ í’ˆì§ˆ", "ì¹œì ˆí•œ ì„œë¹„ìŠ¤", "ê¹”ë”í•œ ìœ„ìƒ ê´€ë¦¬", "íŠ¸ë Œë””í•œ ë©”ë‰´ êµ¬ì„±", "ê³„ì ˆ/í•œì • ë©”ë‰´ ì œê³µ",
        "ê³ ê° ë§ì¶¤í˜• ì˜µì…˜", "SNS ì¸ì¦ìƒ·ìš© ë¹„ì£¼ì–¼", "ì˜¤ëœ ì „í†µ/ì—­ì‚¬", "ì¹œí™˜ê²½/ë¡œì»¬í‘¸ë“œ ì‚¬ìš©",
        "í¬ì¥/í…Œì´í¬ì•„ì›ƒ ìš©ì´", "ë‹¨ì²´/ëª¨ì„ ì í•©", "ê°€ì„±ë¹„ ì¢‹ì€ ì„¸íŠ¸ ë©”ë‰´"
    ]
)

custom_points_raw = st.text_input("ì§ì ‘ ì…ë ¥(ì‰¼í‘œë¡œ êµ¬ë¶„)", placeholder="ì˜ˆ: ë¹„ê±´ ë©”ë‰´, í”„ë¦¬ë¯¸ì—„ ì™€ì¸, ì €ì¹¼ë¡œë¦¬ ì˜µì…˜")
if custom_points_raw:
    custom_points = [p.strip() for p in custom_points_raw.split(",") if p.strip()]
    selling_points.extend(custom_points)

# 6. ê´‘ê³  ëª©ì  ------------------------------
ad_purpose = st.selectbox("**6. ê´‘ê³  ëª©ì **", 
    ["ì‹ ê·œ ê³ ê° ìœ ì¹˜", "ë‹¨ê³¨ ê³ ê° í™•ë³´", "ì‹œì¦Œ/ì´ë²¤íŠ¸ í™ë³´", "ì‹ ë©”ë‰´ ì¶œì‹œ í™ë³´", "ë¸Œëœë“œ ì´ë¯¸ì§€ ê°•í™”", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
)

custom_ad_purpose = ""
if ad_purpose == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    custom_ad_purpose = st.text_input("ê¸°íƒ€ ê´‘ê³  ëª©ì ì„ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: ì§€ì—­ ì‚¬íšŒ ì°¸ì—¬, í”„ë¦¬ë¯¸ì—„ ì´ë¯¸ì§€ êµ¬ì¶•")

ad_purpose = custom_ad_purpose if ad_purpose == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else ad_purpose


# 7. ë¶„ìœ„ê¸° ------------------------------
mood = st.selectbox("**7. ê°€ê²Œ ë¶„ìœ„ê¸°/ì»¨ì…‰(ì„ íƒ)**", 
    ["(ì„ íƒ ì•ˆ í•¨)", "ì•„ëŠ‘í•œ/í¸ì•ˆí•œ", "ì„¸ë ¨ëœ/íŠ¸ë Œë””í•œ", "í™œê¸°ì°¬/ì—ë„ˆì§€ ë„˜ì¹˜ëŠ”", "ì „í†µì ì¸/í–¥í† ì ì¸", "í”„ë¦¬ë¯¸ì—„/ê³ ê¸‰ìŠ¤ëŸ¬ìš´", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
)

custom_mood = ""
if mood == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    custom_mood = st.text_input("âœï¸ ê¸°íƒ€ ë¶„ìœ„ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: ëª¨ë˜í•œ ê°ì„±, ë¹ˆí‹°ì§€ ìŠ¤íƒ€ì¼")

mood = custom_mood if mood == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else mood

# 8. ìœ„ì¹˜ ------------------------------
location = st.selectbox("**8. ìœ„ì¹˜/ì…ì§€ íŠ¹ì„±(ì„ íƒ)**", 
    ["(ì„ íƒ ì•ˆ í•¨)", "ì—­ì„¸ê¶Œ", "í•™êµ/í•™ì›ê°€ ê·¼ì²˜", "ì£¼ê±° ë‹¨ì§€ ì¤‘ì‹¬", "ë²ˆí™”ê°€/ìƒê¶Œ ì¤‘ì‹¬ì§€", "ê´€ê´‘ì§€/ëª…ì†Œ ì¸ê·¼", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
)
custom_location = ""
if location == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    custom_location = st.text_input("âœï¸ ê¸°íƒ€ ìœ„ì¹˜/ì…ì§€ íŠ¹ì„±ì„ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: ì˜¤í”¼ìŠ¤ ë°€ì§‘ ì§€ì—­, ëŒ€í˜• ë§ˆíŠ¸ ê·¼ì²˜")
location = custom_location if location == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else location


# 9. ì´ë²¤íŠ¸ ------------------------------
event = st.selectbox("**9. ì´ë²¤íŠ¸/í”„ë¡œëª¨ì…˜(ì„ íƒ)**", 
    ["(ì„ íƒ ì•ˆ í•¨)", "ì˜¤í”ˆ ì´ë²¤íŠ¸", "1+1 í–‰ì‚¬", "íŠ¹ì • ìš”ì¼ í• ì¸", "ìƒì¼ ì¿ í° ì œê³µ", "ë‹¨ì²´ ì£¼ë¬¸ í• ì¸", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
)
custom_event = ""
if event == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    custom_event = st.text_input("âœï¸ ê¸°íƒ€ ì´ë²¤íŠ¸/í”„ë¡œëª¨ì…˜ì„ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: í•´í”¼ì•„ì›Œ, ì²« ë°©ë¬¸ ê³ ê° í• ì¸")
event = custom_event if event == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else event


# 10. ë¸Œëœë“œ í†¤ ------------------------------
tone = st.selectbox("**10. ë¸Œëœë“œ í†¤ & ë©”ì‹œì§€ ìŠ¤íƒ€ì¼(ì„ íƒ)**", 
    ["(ì„ íƒ ì•ˆ í•¨)", "ì¹œê·¼í•˜ê³  ìœ ì¾Œí•œ", "ì„¸ë ¨ë˜ê³  ê°ê°ì ì¸", "ì „í†µì ì´ê³  ì‹ ë¢°ê° ìˆëŠ”", "íŠ¸ë Œë””í•˜ê³  ì Šì€ ê°ì„±", "ë”°ëœ»í•˜ê³  ê°€ì¡±ì ì¸", "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)"]
)
custom_tone = ""
if tone == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)":
    custom_tone = st.text_input("âœï¸ ê¸°íƒ€ í†¤ & ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ì„ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: ëŸ­ì…”ë¦¬, ìºì£¼ì–¼, ë¯¸ë‹ˆë©€ë¦¬ì¦˜")
tone = custom_tone if tone == "ê¸°íƒ€(ì§ì ‘ ì…ë ¥)" else tone

# --- ì œì¶œ ë²„íŠ¼ ---
if st.button("ì œì¶œ"):
    st.subheader("ğŸ“‹ ì…ë ¥ëœ ì •ë³´")
    st.write("**ìƒí˜¸ëª…:**", store_name)
    st.write("**ì—…ì¢…-ëŒ€ë¶„ë¥˜:**", category_main)
    st.write("**ì—…ì¢…-ì„¸ë¶€ ë¶„ë¥˜:**", category_sub)
    
    st.write("**ì£¼ìš” ë©”ë‰´/ìƒí’ˆ:**")
    for idx, m in enumerate(menus, 1):
        st.write(f"ì„œë¹„ìŠ¤ {idx}: {m['name']} - {m['price']} ì›")
    
    st.write("**íƒ€ê²Ÿ ê³ ê°ì¸µ:**", targets)
    st.write("**íŒë§¤ í¬ì¸íŠ¸:**", selling_points)
    st.write("**ê´‘ê³  ëª©ì :**", ad_purpose)
    if mood and mood != "(ì„ íƒ ì•ˆ í•¨)":
        st.write("**ê°€ê²Œ ë¶„ìœ„ê¸°/ì»¨ì…‰:**", mood)

    if location and location != "(ì„ íƒ ì•ˆ í•¨)":
        st.write("**ìœ„ì¹˜/ì…ì§€ íŠ¹ì„±:**", location)

    if event and event != "(ì„ íƒ ì•ˆ í•¨)":
        st.write("**ì´ë²¤íŠ¸/í”„ë¡œëª¨ì…˜:**", event)

    if tone and tone != "(ì„ íƒ ì•ˆ í•¨)":
        st.write("**ë¸Œëœë“œ í†¤ & ë©”ì‹œì§€ ìŠ¤íƒ€ì¼:**", tone)
    
    st.success("âœ… ì •ë³´ê°€ ì •ìƒì ìœ¼ë¡œ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤!")

# type hint

# 0. store_name : str
#     ë¸Œëœë“œ ëª…
# 1. category_main : str
#     ì—…ì¢… ëŒ€ë¶„ë¥˜
# 2. category_sub : str
#     ì—…ì¢… ì„¸ë¶€ ë¶„ë¥˜
# 3. menus : List[Dict[str, Union[str, int]]]
#     ì£¼ìš” ì„œë¹„ìŠ¤
#     key of dict
#         - 'name' : ë©”ë‰´ ëª…(str)
#         - 'price' : ê°€ê²©(int)
# 4. targets : List[str]
#     íƒ€ê²Ÿì¸µ
# 5. selling_points : List[str]
#     ì£¼ìš” íŒë§¤ í¬ì¸íŠ¸
# 6. ad_purpose : str
#     ê´‘ê³  ëª©ì 
# 7. mood : str
#     ë¶„ìœ„ê¸°
# 8. location : str
#     ìœ„ì¹˜
# 9. event : str
#     ì´ë²¤íŠ¸
# 10. tone : str
#     ë¸Œëœë“œ í†¤ & í™ë³´ ìŠ¤íƒ€ì¼